<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Установка и настройка - Юпи!</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Установка и настройка";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-61725465-4', 'docs.yupe.ru');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Юпи!</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Поиск по документации" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <ul class="subnav">
    <li><span>О проекте</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="..">Начало</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../intro/">Знакомство с Yii</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../assistance.project/">Помощь проекту</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../team/">Команда</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../how/">Как сделать ?</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Введение</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../hosting/">Системные требования</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../install/">Установка</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../update/">Обновление</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Модули</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../modules/">Обзор модулей</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Установка и настройка</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#_1">МойСклад</a></li>
                
            
                <li class="toctree-l3"><a href="#amocrm">AmoCRM</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../module-create/">Создание модуля</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../settings/">Настройки сайта</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Разработчику</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../migrator.index/">Мигратор</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../config.manager/">Управление конфигами</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../atomfeed/">Генерация Atom-ленты</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../cwebuser.issues/">Проблемы CWebUser и модуля Gii</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../events/">Работа с событиями</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../zend.search/">Модуль поиска на основе Zend Lucene</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../testing/">Тестирование</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../apc.options/">Оптимальные настройки APC</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../editors.eclipse/">Работа с eclipse</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../memcached/">Конфигурация Memcahed</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ubuntu/">Установка на Linux</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../userspace.config/">Конфигурация модулей с настройками пользователей</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Юпи!</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Документация</a> &raquo;</li>
    
      
        
          <li>Модули &raquo;</li>
        
      
    
    <li>Установка и настройка</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/amyLabs/yupe-guides" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="_1">МойСклад</h1>
<p><a href="https://yupe.ru/store/modules/crm/moy-sklad.html">Модуль</a> создан для интеграции с сервисом "<a href="https://www.moysklad.ru/">МойСклад</a>", но также позволяет обмениваться данными с программами 1С из-за того, что синхронизация осуществляется посредством стандарта <a href="http://v8.1c.ru/edi/edi_stnd/90/92.htm">CommerceML</a>.</p>
<p>При помощи этого модуля вы можете синхронизировать:</p>
<ul>
<li>категории товаров;</li>
<li>товарные позиции (артикул, описание) с привязкой к категории;</li>
<li>остатки на складе (количество и стоимость);</li>
<li>заказы.</li>
</ul>
<h2>Установка</h2>

<div class="admonition important">
<p class="admonition-title">Внимание!</p>
<p>При отсутствии должного технического опыта все перечисленные ниже процедуры лучше <a href="https://yupe.ru/service/support">доверить профессионалам</a>.</p>
</div>
<p>После <a href="https://yupe.ru/store/modules/crm/moy-sklad.html">приобретения модуля</a> вам необходимо распаковать архив и поместить его содержимое в папку <code>protected/modules</code> сайта, который будет подключаться к сервису "МойСклад".</p>
<p>Затем в панели управления сайтом (Юпи! - Мои модули) устанавливаем его.</p>
<p><img alt="Установка модуля cml" src="../img/module-cml-1.png" /></p>
<p>При условии успешной установки в меню раздела <code>Магазин</code> должен появиться пункт <code>CommerceML</code></p>
<p><img alt="Модуль CommerceML в меню" src="../img/module-cml-2.png" /></p>
<h2>Настройка</h2>

<p>Для начала в настройках модуля зададим данные для авторизации пользователя, который будет иметь доступ к синхронизации.</p>
<p><img alt="Настройка данных пользователя" src="../img/module-cml-3.png" /></p>
<p><em>Здесь указываются данные придуманного вами пользователя.</em></p>
<p><strong>Обратите внимание</strong>, что нет никакой необходимости указывать данные администратора или любого другого пользователя зарегистрированного на сайте.</p>
<p>Также мы <strong>настоятельно рекомендуем</strong> воздержаться от использования простого пароля и секретного ключа. Воспользуйтесь <a href="https://lastpass.com/generatepassword.php">специальными сервисами</a> для их генерации.</p>
<p><strong>Секретный ключ</strong> указан для примера и его нужно <strong>обязательно заменить</strong>.</p>
<p>Оставшиеся поля пока не трогаем, сохраняем изменения и переходим к настройкам в сервисе "МойСклад". </p>
<p>Для этого необходимо перейти в раздел <code>Синхронизация</code>, где нужно кликнуть на кнопку <code>Добавить магазин</code> и в выпадающем списке выбрать пункт <code>Обмен по CommerceML</code>.</p>
<p><img alt="МойСклад синхронизация" src="../img/module-cml-4.png" /></p>
<div class="admonition important">
<p class="admonition-title">Владельцам продуктов 1С</p>
<p>Достаточно подробную инструкцию по настройке <code>1С Предприятие</code> вы можете найти <a href="http://www.cs-cart.ru/docs/4.1.x/rus_build_pack/1c/instruction/index.html#id3">перейдя по ссылке</a>. Следовать инструкции нужно до раздела "Настройки в интернет-магазине".</p>
</div>
<p>На открывшейся странице указываем адрес магазина, который формируется следующим образом: <code>http://ваш-сайт/cml/sync</code> (например <code>https://yupe.ru/cml/sync</code>), и указываем данные пользователя, придуманные ранее. </p>
<p>После этого вы можете нажать на кнопку <code>Проверить соединение</code>, чтобы убедиться в правильности указанных данных. В этом случае появится сообщение "Соединение прошло успешно".</p>
<p><img alt="МойСклад. Настройка" src="../img/module-cml-5.png" /></p>
<p>Далее в разделах <code>Заказы</code> и <code>Остатки</code> необходимо выбрать, который из них вы будете выгружать, и указать временные интервалы, через которые будет осуществляться выгрузка. </p>
<p>При необходимости у заказов можно поставить отметку "Отправлять статусы заказов в ИМ", т.е. при изменении статуса заказа в МоемСкладе он будет выгружен на сайт.</p>
<div class="admonition note">
<p class="admonition-title">Обратите внимание</p>
<p>МойСклад не выгружает в CommerceML формате полные данные заказа. На сайт отправляются только статус заказа, в случае его изменения, и отметка об удалении.</p>
</div>
<p>Теперь можно перейти к оставшимся настройкам модуля CommerceML в панели управления интернет-магазином. Мы опишем лишь те, которые могут вызвать хоть какие-то вопросы:</p>
<h5>Что делать с категориями, отсутствующими в файле импорта</h5>

<p>В каталоге вашего магазина уже могут быть категории, которых не будет в файле выгрузки. На этот случай системе нужно знать, что с ними делать. </p>
<p>Доступны 3 варианта: Ничего, <strong>Деактивировать</strong> и Удалить. </p>
<p>По умолчанию выбран пункт Деактивировать - это значит, что категории будет присвоен статус <code>Черновик</code>. Она не будет отображаться на сайте, но вы сможете увидеть ее в панели управления.</p>
<h5>Что делать с товарами, отсутствующими в файле импорта</h5>

<p>Все то же самое, как и у категорий, только у товара будет установлен статус <code>Недоступен</code>, если выбран пункт Деактивировать.</p>
<h5>Статус "Нет в наличии" если количество = 0</h5>

<p>Если в остатках на складе количество товара равно 0, то товару автоматически будет присвоен соответствующий статус. Данная опция будет работать только при включенной <code>Обновлять количество товара</code>.</p>
<h5>"Ид" цены продукта, "Ид" скидочной цены продукта</h5>

<p>Системе необходимо определять, которую из цен в файле выгрузки ставить в соответствующее поле товара.</p>
<div class="admonition important">
<p class="admonition-title">Внимание</p>
<p>Без указания внешнего кода цены на сайте обновляться не будут!</p>
</div>
<p>Чтобы узнать эти коды, вам нужно перейти в раздел <code>Справочники - Товары и услуги</code> в МоемСкладе, где кликнуть на кнопке создания нового товара или редактировании уже существующего.</p>
<p>На открывшейся странице, в блоке Цены, нажать на ссылку <code>Внешние коды цен</code>.</p>
<p><img alt="МойСклад. Внешние коды цен" src="../img/module-cml-6.png" /></p>
<p><img alt="МойСклад. Внешние коды цен" src="../img/module-cml-7.png" /></p>
<p><em>Количество и названия цен могут отличаться от указанных на скриншоте</em></p>
<p><strong>Не забудьте</strong> указать выбранные цены в настройках синхронизации сервиса МойСклад, чтобы они попали в файл выгрузки.</p>
<p>На этом все.</p>
<div class="admonition note">
<p>Сообщения о количестве выгруженных товаров, загруженных заказов или ошибках, будут доступны на вкладке <code>Отчет</code> в настроенной вами синхронизации в МоемСкладе. <em>См. скриншот выше</em></p>
</div>
<h1 id="amocrm">AmoCRM</h1>
<h2>Установка</h2>

<p>Скопировать модуль в <code>protected/modules</code>.</p>
<p>Установить зависимости через composer.</p>
<pre><code class="bash">$ composer require dotzero/yii-amocrm
</code></pre>

<h2>Настройка</h2>

<ul>
<li>Зайти в настройки AmoCRM и скопировать ключ API</li>
<li>Перейти в "Сервисы" ---&gt; AmoCrm и указать ключ, поддомен, email пользователя AmoCRM, нажать "Сохранить"</li>
<li>Выбрать из списка поля email и телефон</li>
<li>Поставить в крон команду  <code>php /&lt;путь к сайту&gt;/protected/yiic amocrm-export</code> </li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../module-create/" class="btn btn-neutral float-right" title="Создание модуля"/>Далее <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../modules/" class="btn btn-neutral" title="Обзор модулей"><span class="icon icon-circle-arrow-left"></span> Назад</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../modules/" style="color: #fcfcfc;">&laquo; Назад</a></span>
      
      
        <span style="margin-left: 15px"><a href="../module-create/" style="color: #fcfcfc">Далее &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
